!function(e,i){var t=function(e){function t(){u=new i.Stage(e.canvasId),i.Touch.enable(u);var t=new i.LoadQueue;t.installPlugin(i.Sound),t.on("complete",function(i){g.playBgMusic(),e.onReady&&e.onReady();var t=i.target;g.readyTimer=setInterval(function(){g.isReady&&(n(t),clearInterval(g.readyTimer))},16)},this),t.loadManifest(e.resource,!0)}function n(t){d(t),s(t),i.Ticker.timingMode=i.Ticker.RAF,i.Ticker.on("tick",function(i){e.gameRoundTime-=16,e.gameRoundTime>=0?m.text=Math.floor(e.gameRoundTime/1e3)+"."+Math.floor(e.gameRoundTime%1e3/100)+" s":(m.text="0 s",_||a()),u.update(i)},this)}function a(){for(var i=0;i<9;i++)w[i].paused=!0,y[i].paused=!0,h[i].removeAllEventListeners("mousedown");g.playGameOverMusic(),e.onGameOver&&e.onGameOver(),_=!0}function o(e,t,n,a,o){var s=Math.floor(6*Math.random()),d=!1;e.gotoAndStop(s);var u=i.Tween.get(e,{loop:!0}).wait(a*Math.random()).to({y:t},o).wait(a).to({y:n},o).call(function(){s=Math.floor(6*Math.random()),e.gotoAndStop(s),d=!1}),r=i.Tween.get(e,{loop:!1,paused:!0}).to({scale:.5,skewX:-5,skewY:-5},100).to({scale:.7,skewX:5,skewY:5},100).to({scale:1,skewX:0,skewY:0},200).wait(a).call(function(){u.paused=!1});w.push(u),y.push(r),e.on("mousedown",function(){if(!d){u.paused=!0,r.paused=!1,r.gotoAndPlay(0),v[s]++;for(var e=0;e<6;e++)g.currentScores[e]=v[e];3!=s?g.playSuccessMusic():g.playFailureMusic(),d=!0}},this)}function s(t){var n=t.getResult("game_bg"),a=new i.Bitmap(n).set({scale:e.remScale,x:0,y:0});u.addChild(a);var s=t.getResult("timer_bg"),d=new i.Bitmap(s).set({scale:e.remScale,x:10,y:10});u.addChild(d);for(var c=[[50,400,160,160],[50,580,160,160],[45,760,160,160],[280,448,160,160],[285,620,160,160],[283,795,160,160],[515,410,160,160],[525,590,160,160],[526,770,160,160]],g=0;g<9;g++){var f=new i.Shape;f.graphics.drawRect(c[g][0]*e.remScale,c[g][1]*e.remScale,c[g][2]*e.remScale,c[g][3]*e.remScale),p.push(f)}l=new i.Container(r),u.addChild(l);for(var w=[[20,400],[30,580],[20,760],[260,443],[260,615],[260,790],[495,405],[495,585],[495,760]],g=0;g<9;g++){var y=new i.Sprite(r,"squatters"),v=y.getBounds(),_=w[g][0]*e.remScale+(v.width>>1),S=(w[g][1]+160)*e.remScale+(v.height>>1),M=w[g][1]*e.remScale+(v.height>>1);y.set({x:_,y:S,regX:v.width>>1,regY:v.height>>1}),l.addChild(y),y.mask=p[g],h.push(y),o(y,M,S,600,300)}m=new i.Text("60 s","18px Arial","#000"),m.x=125*e.remScale,m.y=65*e.remScale,u.addChild(m)}function d(t){c=new i.SpriteSheetBuilder;for(var n=0;n<6;n++){var a=t.getResult("squatter_"+(n+1)),o=new i.Bitmap(a),s=c.addFrame(o,null,.63*e.remScale,function(e,i){},n);f.push(s)}c.addAnimation("squatters",f,!0,8),r=c.build()}this.version="1.0.1",this.author="Nelson Kuang",this.description="A Dried-Fruit-Hitting Game",this.defaults={canvasId:"canvas",width:window.innerWidth>750?750:window.innerWidth,height:window.innerHeight,resource:[{id:"squatter_1",src:"/dist/img/coupon_again_icon1.png"},{id:"squatter_2",src:"/dist/img/coupon_again_icon2.png"},{id:"squatter_3",src:"/dist/img/coupon_again_icon3.png"},{id:"squatter_4",src:"/dist/img/coupon_again_icon4.png"},{id:"squatter_5",src:"/dist/img/coupon_again_icon5.png"},{id:"squatter_6",src:"/dist/img/coupon_again_icon6.png"},{id:"game_bg",src:"/dist/img/gamebg.jpg"},{id:"timer_bg",src:"/dist/img/gameTime.png"},{id:"game_bgm",src:"/dist/audio/gamebg.mp3"},{id:"audio_ok",src:"/dist/audio/clickO.mp3"},{id:"audio_no",src:"/dist/audio/clickN.mp3"},{id:"audio_end",src:"/dist/audio/gameEnd.mp3"},{id:"audio_countdown",src:"/dist/audio/countdown.mp3"}],gameRoundTime:6e4,soundOff:!1,spriteWaitTime:600,spriteMoveDuration:300,remScale:document.getElementsByTagName("html")[0].style.fontSize.replace("px","")/75,onReady:function(){},onGameOver:function(){}},e=this.extend(this.defaults,e),this.currentScores=[0,0,0,0,0,0],this.soundOff=e.soundOff,this.isReady=!1,this.readyTimer=null;var u,r,c,l,m,g=this,h=[],p=[],f=[],w=[],y=[],v=[0,0,0,0,0,0],_=!1,S=document.getElementById(e.canvasId);S.setAttribute("width",e.width),S.setAttribute("height",e.height),t()};t.prototype={constructor:t,extend:function(e,i){var t={};for(var n in e)t[n]=e[n];for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a]);return t},start:function(){this.isReady=!0},musicOn:function(){this.soundOff=!1,this.playBgMusic()},musicOff:function(){i.Sound.stop(),this.soundOff=!0},playBgMusic:function(){this.soundOff||i.Sound.play("game_bgm",{loop:-1})},playGameOverMusic:function(){this.soundOff||(this.musicOff(),i.Sound.play("audio_end"))},playCountdownMusic:function(){this.soundOff||i.Sound.play("audio_countdown")},playSuccessMusic:function(){this.soundOff||i.Sound.play("audio_ok")},playFailureMusic:function(){this.soundOff||i.Sound.play("audio_no",{offset:500})}},e.DFGame=t}(this,createjs);