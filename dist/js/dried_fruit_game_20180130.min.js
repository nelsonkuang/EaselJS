!function(e,t){var i=function(e){function i(){u=new t.Stage(e.canvasId),t.Touch.enable(u);var i=new t.LoadQueue;i.installPlugin(t.Sound),i.on("complete",function(t){p.playBgMusic(),e.onReady&&e.onReady();var i=t.target;p.readyTimer=setInterval(function(){p.isReady&&(a(i),clearInterval(p.readyTimer))},16)},this),i.loadManifest(e.resource,!0)}function a(i){r(i),d(i),t.Ticker.timingMode=t.Ticker.RAF,t.Ticker.on("tick",function(t){e.gameRoundTime-=16,e.gameRoundTime>=0?g.text=Math.floor(e.gameRoundTime/1e3)+"."+Math.floor(e.gameRoundTime%1e3/100)+" s":(g.text="0 s",M||n()),u.update(t)},this)}function n(){for(var t=0;t<9;t++)y[t].paused=!0,S[t].paused=!0,f[t].removeAllEventListeners("mousedown");p.playGameOverMusic(),e.onGameOver&&e.onGameOver(),M=!0}function o(e){var i="+ ";3==e?i="  + 1":i+=0==e?200:100,h.text=i;t.Tween.get(h,{loop:!1,override:!0}).to({scale:1.2,alpha:.8},100).wait(500).to({scale:.8,alpha:0},100)}function s(e,i,a,n,s){var d=Math.floor(6*Math.random()),r=!1;e.gotoAndStop(d);var u=t.Tween.get(e,{loop:!0}).wait(n*Math.random()).to({y:i},s).wait(n).to({y:a},s).call(function(){d=Math.floor(6*Math.random()),e.gotoAndStop(d),r=!1}),c=t.Tween.get(e,{loop:!1,paused:!0}).to({scale:.5,skewX:-5,skewY:-5},100).to({scale:.7,skewX:5,skewY:5},100).to({scale:1,skewX:0,skewY:0},200).wait(n).call(function(){u.paused=!1});y.push(u),S.push(c),e.on("mousedown",function(){if(!r){u.paused=!0,c.paused=!1,c.gotoAndPlay(0),_[d]++;for(var e=0;e<6;e++)p.currentScores[e]=_[e];3!=d?p.playSuccessMusic():p.playFailureMusic(),o(d),r=!0}},this)}function d(i){var a=i.getResult("game_bg"),n=new t.Bitmap(a).set({scale:e.remScale,x:0,y:0});u.addChild(n);var o=i.getResult("timer_bg"),d=new t.Bitmap(o).set({scale:e.remScale,x:10,y:10});u.addChild(d);for(var r=[[50,400,160,160],[50,580,160,160],[45,760,160,160],[280,448,160,160],[285,620,160,160],[283,795,160,160],[515,410,160,160],[525,590,160,160],[526,770,160,160]],l=0;l<9;l++){var p=new t.Shape;p.graphics.drawRect(r[l][0]*e.remScale,r[l][1]*e.remScale,r[l][2]*e.remScale,r[l][3]*e.remScale),w.push(p)}m=new t.Container(c),u.addChild(m);for(var v=[[20,400],[30,580],[20,760],[260,443],[260,615],[260,790],[495,405],[495,585],[495,760]],l=0;l<9;l++){var y=new t.Sprite(c,"squatters"),S=y.getBounds(),_=v[l][0]*e.remScale+(S.width>>1),M=(v[l][1]+160)*e.remScale+(S.height>>1),O=v[l][1]*e.remScale+(S.height>>1);y.set({x:_,y:M,regX:S.width>>1,regY:S.height>>1}),m.addChild(y),y.mask=w[l],f.push(y),s(y,O,M,600,300)}g=new t.Text("60 s","18px Arial","#000"),g.x=125*e.remScale,g.y=65*e.remScale,u.addChild(g),h=new t.Text("+ 000"),h.font="bold 60px Arial",h.color="#fff";var T=h.getBounds();h.set({x:355*e.remScale,y:225*e.remScale,regX:T.width>>1,regY:T.height>>1,scale:.5,alpha:0}),u.addChild(h)}function r(i){l=new t.SpriteSheetBuilder;for(var a=0;a<6;a++){var n=i.getResult("squatter_"+(a+1)),o=new t.Bitmap(n),s=l.addFrame(o,null,.63*e.remScale,function(e,t){},a);v.push(s)}l.addAnimation("squatters",v,!0,8),c=l.build()}this.version="1.0.1",this.author="Nelson Kuang",this.description="A Dried-Fruit-Hitting Game",this.defaults={canvasId:"canvas",width:window.innerWidth>750?750:window.innerWidth,height:window.innerHeight,resource:[{id:"squatter_1",src:"/dist/img/coupon_again_icon1.png"},{id:"squatter_2",src:"/dist/img/coupon_again_icon2.png"},{id:"squatter_3",src:"/dist/img/coupon_again_icon3.png"},{id:"squatter_4",src:"/dist/img/coupon_again_icon4.png"},{id:"squatter_5",src:"/dist/img/coupon_again_icon5.png"},{id:"squatter_6",src:"/dist/img/coupon_again_icon6.png"},{id:"game_bg",src:"/dist/img/gamebg.jpg"},{id:"timer_bg",src:"/dist/img/gameTime.png"},{id:"game_bgm",src:"/dist/audio/gamebg.mp3"},{id:"audio_ok",src:"/dist/audio/clickO.mp3"},{id:"audio_no",src:"/dist/audio/clickN.mp3"},{id:"audio_end",src:"/dist/audio/gameEnd.mp3"},{id:"audio_countdown",src:"/dist/audio/countdown.mp3"}],gameRoundTime:6e4,soundOff:!1,spriteWaitTime:600,spriteMoveDuration:300,remScale:document.getElementsByTagName("html")[0].style.fontSize.replace("px","")/75,onReady:function(){},onGameOver:function(){}},e=this.extend(this.defaults,e),this.currentScores=[0,0,0,0,0,0],this.soundOff=e.soundOff,this.isReady=!1,this.readyTimer=null;var u,c,l,m,g,h,p=this,f=[],w=[],v=[],y=[],S=[],_=[0,0,0,0,0,0],M=!1,O=document.getElementById(e.canvasId);O.setAttribute("width",e.width),O.setAttribute("height",e.height),i()};i.prototype={constructor:i,extend:function(e,t){var i={};for(var a in e)i[a]=e[a];for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i},start:function(){this.isReady=!0},musicOn:function(){this.soundOff=!1,this.playBgMusic()},musicOff:function(){t.Sound.stop(),this.soundOff=!0},playBgMusic:function(){this.soundOff||t.Sound.play("game_bgm",{loop:-1})},playGameOverMusic:function(){this.soundOff||(this.musicOff(),t.Sound.play("audio_end"))},playCountdownMusic:function(){this.soundOff||t.Sound.play("audio_countdown")},playSuccessMusic:function(){this.soundOff||t.Sound.play("audio_ok")},playFailureMusic:function(){this.soundOff||t.Sound.play("audio_no",{offset:500})}},e.DFGame=i}(this,createjs);