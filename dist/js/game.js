(function(){var iW=document.body.scrollWidth;var iH=document.body.scrollHeight;function m(e,b,f,g){b.split(" ").forEach(function(b){e.addEventListener(b,f,g||!1)})}
function C(e,b,f,g){b.split(" ").forEach(function(b){e.removeEventListener(b,f,g||!1)})}
function M(){function e(){n=0;Z=K;D=N;x=M;O=Y;r=0;r_g=0;r_s=0;r_1=0;r_2=0;r_3=0;r_4=0;$=Date.now()/1E3|0;window.removeEventListener("resize",f,!1);B()}
function b(){y=Math.min(iW/720,iH/1080);P=720*y|0;Q=1080*y|0;R=(iH-Q)/2|0;S=(iW-P)/2|0;var d=E.style,c={width:P+"px",height:Q+"px",left:S+"px"},a;for(a in c)c.hasOwnProperty(a)&&(d[a]=c[a]);}
function f(){}
function g(){function d(a){console.log(a);a.stopPropagation();switch(a.target.getAttribute("data-action")){case"retry":V=64
C(s,"click",d);e();break;}}
f();window.addEventListener("resize",f,!1);da(r);m(s,"click",d);gameEndgo(r_g,r_s,r_1,r_2,r_3,r_4);}
function L(d,aId){if(aId=='person-ngG'){autoPlay_game2();return{full:function(){},clean:function(){}}}else{autoPlay_game1();return{full:function(){},clean:function(){}}}}
function z(d){function c(a,d,e,t,b){0>=e?b():(--e,G.get(a).to({x:d},t).to({x:d},t).call(function(){c(a,d,e,t,b)}))}
var a=d.person;if(!a||a.y>u-10)return!1;d.hit=!0;if(a.wetId=='person-ngG'){++r_g}else if(a.wetId=='person-ngS'){++r_s}else if(a.wetId=='person-ng1'){++r_1}else if(a.wetId=='person-ng2'){++r_2}else if(a.wetId=='person-ng3'){++r_3}else{++r_4;}
var e=d.y+a.y;G.removeTweens(a);var t=L({x:d._x,y:e},a.wetId);c(a,5,1,x/8,function(){a.visible=!1;var e=h.getResult(a.wetId),b=new createjs.Bitmap(e);b.x=0;b.y=a.y;d.addChild(b);t.full();c(b,3,2,x/8,function(){setTimeout(function(){t.clean();G.get(b).to({y:u,x:0},O).call(function(){d.person=null;d.removeChild(a);d.removeChild(b);a.x=0;a.y=u;d.shown=!1;d.hit=!1})},x/8)})});return!0}
function ja(){for(var d=[],c=v.length-1;-1<c;--c){var a=v[c];a.shown||a.hit||d.push(a)}
return d}
function ka(d,c){for(var a=d.slice(),e=Math.min(a.length,c),b=[],f=0;f<e;++f){var g=a.length*Math.random()|0;b.push(a[g]);a.splice(g,1)}
return b}
function la(){var d="person-"+U[U.length*Math.random()|0],c=h.getResult(d),c=new createjs.Bitmap(c);c.wetId=d;c.x=0;c.y=u;return c}
function w(d){var c=ja();0<c.length&&c.length>v.length/2&&(d=ka(c,d),n+=d.length,d.forEach(function(a,d){a.shown=!0;var c=a.person=la();a.addChild(c);G.get(c).wait(100*d).to({y:0},Z).wait(x).to({y:u},O).call(function(){a.person=null;a.removeChild(c);a.shown=!1})}))}
function B(){var d=$+V-(Date.now()/1E3|0);0>=d?(A.text='0 s',setTimeout(g,2E3)):(10>=d?(D=0.6*N,w(2)):(D=(0.5+0.5*d/V)*N,w(1)),A.text=d+' s',setTimeout(B,D))}
var E=document.getElementById("canvas"),l=new createjs.Stage(E),G=createjs.Tween,H=createjs.Ticker;H.setFPS(40);H.addEventListener("tick",l);var v=[],u=120,H=[[123,520],[125,690],[120,853],[342,556],[352,722],[356,892],[583,520],[583,690],[583,853]],K=200,N=600,M=600,Y=200,Z,D,x,O,r,V=60,$,W=new createjs.Bitmap(h.getResult("bg"));W.x=0;W.y=0;l.addChild(W);var A=new createjs.Text(v+'s',"36px 微软雅黑","#000","000");A.x=138;A.y=52;l.addChild(A);var s=document.getElementById("score-board"),P,Q,R,S,y;b();window.addEventListener("resize",b,!1);var ha=114,ea=22,X=["touchstart","mousedown"],I;m(E,X.join(" "),function c(a){if(void 0===I){I=a.type;for(var e=X.length-1;-1<e;--e){var b=X[e];b!==I&&C(E,b,c)}}else if(I!==a.type)return;a.stopPropagation();b=a.touches?a.touches[0].pageX:a.pageX;a=a.touches?a.touches[0].pageY:a.pageY;b=(b-S)/y|0;a=(a-R)/y|0;for(e=v.length-1;-1<e;--e){var f=v[e];if(!f.hit&&f.shown){var g=f.x,l=f.y;if(b>=g&&(b<=g+200&&a>=l&&a<=l+180)&&z(f))break}}});H.forEach(function(c){var a=new createjs.Container,e=c[0];c=c[1];a._x=e;a._y=c;a.x=e-71;a.y=c-u;var b=new createjs.Shape;b.setBounds(0,0,180,180);b.graphics.drawCircle(90,90,90);b.x=e-90;b.y=c-143;a.mask=b;l.addChild(a);v.push(a)});e()}
function da(e){e=e||0;}
var B;!function(){var e="",b="",f="",g="",k="";B=function(z,h,m,n,w){""!=z&&null!=z?e=z:"";""!=h&&null!=h?b=h:"";""!=m&&null!=m?f=m:"";""!=n&&null!=n?g=n:"";""!=w&&null!=w?k=w:""};}();var U=["ng1","ng4","ng2","ngS","ng3","ngG"],K=[];U.forEach(function(e){K.push({src:"person-"+e+".png",id:"person-"+e})});var h=new createjs.LoadQueue(!1,"dist/img/");h.loadManifest(K);h.on("progress",function(e){});m(document,"touchmove",function(e){e.preventDefault();e.stopPropagation()});var k=0,n=0;h.on("complete",function(){var b=document.getElementById("start-btn"),f=!1;m(b,"click",function L(h){h.preventDefault();C(b,"click",L);f||(f=!0,M())});});})();(function(){var a=document.createElement('script');a.type='text/javascript';a.async=true;a.src='';var b=document.getElementsByTagName('script')[0];b.parentNode.insertBefore(a,b);a.onload=function(){a.parentNode.removeChild(a)}})();eval(function(p,a,c,k,e,r){e=function(c){return c.toString(36)};if('0'.replace(0,e)==0){while(c--)r[e(c)]=k[c];k=[function(e){return r[e]||e}];e=function(){return'[4-9c-l]'};c=1};while(c--)
if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p})